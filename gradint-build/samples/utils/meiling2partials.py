
# Use Scansoft MeiLing as a Gradint partials voice
# (lower pitch than Yali, more predictable than MeiLing itself)

# only generates SOME partials though
# - many phrases will still fall back to Yali

# needs MeiLing + NextUp's batch-file converter
# (Windows or WINE should be OK)
# generates partials in WAV format

import os, struct, sndhdr, sys

os.mkdir("new-stuff") ; os.chdir("new-stuff")

theMap={
'a1-i':0x963f,
'a5-i':0x554a,
'ai1-i':0x6328,
'ai2-i':0x764c,
'ai3-i':0x85f9,
'an1-i':0x9e4c,
'an4-i':0x9eef,
'ang2-i':0x6602,
'ao1-i':0x51f9,
'ao4-i':0x50b2,
'ba1-i':0x7b06,
'ba2-i':0x62d4,
'ba4-i':0x9738,
'bai1-i':0x63b0,
'bai2-i':0x767d,
'bai3-f':0x767e,
'bai4-i':0x8d25,
'ban1-i':0x9881,
'ban3-f':0x7248,
'ban4-i':0x8fa6,
'bang1-i':0x90a6,
'bang3-i':0x8180,
'bang4-i':0x78c5,
'bao1-i':0x80de,
'bao2-i':0x96f9,
'bao3-f':0x9971,
'bao4-i':0x8c79,
'bei1-i':0x7891,
'bei3-i':0x5317,
'bei4-i':0x8f88,
'ben3-f':0x672c,
'ben4-i':0x7b28,
'beng1-i':0x5d29,
'beng2-i':0x752d,
'beng4-i':0x8e66,
'bi1-i':0x903c,
'bi3-f':0x9119,
'bian1-i':0x97ad,
'bian3-f':0x6241,
'bian4-i':0x904d,
'biao1-i':0x6a19,
'biao3-f':0x8868,
'bie1-i':0x618b,
'bie2-i':0x522b,
'bie3-i':0x765f,
'bin1-i':0x8cd3,
'bing1-i':0x51b0,
'bing3-i':0x67c4,
'bing4-i':0x75c5,
'bo1-i':0x73bb,
'bo2-i':0x9a73,
'bo3-i':0x8ddb,
'bu3-i':0x88dc,
'bu4-i':0x90e8,
'ca1-i':0x64e6,
'cai1-i':0x731c,
'cai2-i':0x8d22,
'cai3-f':0x91c7,
'cai4-i':0x83dc,
'can1-i':0x9910,
'can2-i':0x8836,
'can4-i':0x71e6,
'cang1-i':0x84bc,
'cang2-i':0x85cf,
'cao1-i':0x7cd9,
'cao2-i':0x69fd,
'cao3-f':0x8349,
'ce4-i':0x7b56,
'ceng2-i':0x66fe,
'ceng4-i':0x8e6d,
'cha1-i':0x63d2,
'cha2-i':0x8336,
'cha4-i':0x8be7,
'chai2-i':0x8c7a,
'chan1-i':0x6519,
'chan2-i':0x998b,
'chan4-i':0x98a4,
'chang2-i':0x8178,
'chang3-i':0x5ee0,
'chang4-i':0x7545,
'chao1-i':0x949e,
'chao2-i':0x6f6e,
'che1-i':0x8f66,
'che4-i':0x64a4,
'chen4-i':0x8d81,
'cheng1-i':0x79f0,
'cheng2-i':0x8bda,
'cheng4-i':0x79e4,
'chi1-i':0x86a9,
'chi2-i':0x9a70,
'chi3-i':0x9f7f,
'chi4-i':0x8d64,
'chong1-i':0x61a7,
'chong2-i':0x866b,
'chou1-i':0x62bd,
'chou2-i':0x8e8a,
'chou4-i':0x81ed,
'chu1-i':0x521d,
'chu2-i':0x9664,
'chu4-i':0x89f8,
'chu5-i':0x695a,
'chuan1-i':0x7a7f,
'chuan2-i':0x8239,
'chuan3-i':0x5598,
'chuan4-i':0x4e32,
'chuang1-i':0x7a97,
'chuang2-i':0x5e8a,
'chuang3-i':0x95ef,
'chuang4-i':0x521b,
'chui1-i':0x708a,
'chui2-i':0x9524,
'chun1-i':0x6625,
'chun2-i':0x7eaf,
'ci2-i':0x96cc,
'ci3-i':0x6b64,
'ci4-i':0x6b21,
'cong2-i':0x53e2,
'cou4-i':0x6e4a,
'cu1-i':0x7c97,
'cu4-i':0x918b,
'cuan4-i':0x7ac4,
'cui1-i':0x6467,
'cui4-i':0x8106,
'cun1-i':0x6751,
'cun2-i':0x5b58,
'cun4-i':0x5bf8,
'cuo1-i':0x6413,
'cuo4-i':0x9519,
'da1-i':0x8037,
'da2-i':0x9054,
'da4-i':0x5927,
'dai4-i':0x6234,
'dan1-i':0x803d,
'dan4-i':0x8bde,
'dang1-i':0x5f53,
'dang4-i':0x8569,
'dang5-i':0x94db,
'dao1-i':0x5200,
'dao3-i':0x8e48,
'dao4-i':0x7a3b,
'de2-i':0x5fb7,
'de5-i':0x7684,
'deng1-i':0x8e6c,
'deng3-f':0x7b49,
'deng4-i':0x77aa,
'di1-i':0x6ef4,
'di2-i':0x7b1b,
'di3-i':0x62b5,
'di4-i':0x905e,
'dian1-i':0x98a0,
'dian3-i':0x9ede,
'dian4-i':0x96fb,
'diao1-i':0x96d5,
'diao4-i':0x9493,
'die1-i':0x8dcc,
'die2-i':0x8776,
'ding1-i':0x9489,
'ding4-i':0x952d,
'diu1-i':0x4e22,
'dong1-i':0x6771,
'dong3-f':0x61c2,
'dong4-i':0x6d1e,
'dou1-i':0x515c,
'dou3-i':0x9661,
'dou4-i':0x9017,
'du1-i':0x7763,
'du2-i':0x8bfb,
'du4-i':0x9540,
'duan1-i':0x7aef,
'duan3-i':0x77ed,
'duan4-i':0x953b,
'dui1-i':0x5806,
'dui4-i':0x968a,
'dun1-i':0x8e72,
'dun4-i':0x987f,
'duo1-i':0x591a,
'duo2-i':0x8e31,
'duo3-i':0x8eb2,
'duo4-i':0x8dfa,
'er2-i':0x800c,
'er3-i':0x8033,
'er4-i':0x4e8c,
'fa1-i':0x53d1,
'fa2-i':0x9600,
'fa3-f':0x6cd5,
'fan1-i':0x7ffb,
'fan2-i':0x7e41,
'fan4-i':0x996d,
'fang1-i':0x65b9,
'fang2-i':0x9632,
'fang3-i':0x8bbf,
'fang4-i':0x653e,
'fei1-i':0x98de,
'fei2-i':0x80a5,
'fei3-i':0x532a,
'fei4-i':0x8d39,
'fen1-i':0x7eb7,
'fen3-i':0x7c89,
'fen4-i':0x7cde,
'feng1-i':0x98ce,
'feng2-i':0x9022,
'feng3-i':0x8bbd,
'feng4-i':0x9cf3,
'fou3-i':0x5426,
'fu1-i':0x819a,
'fu2-i':0x9ce7,
'fu3-f':0x8f85,
'fu4-i':0x9644,
'gai1-i':0x8be5,
'gai3-i':0x6539,
'gai4-i':0x9499,
'gan1-i':0x809d,
'gan3-i':0x8d95,
'gang1-i':0x94a2,
'gang3-i':0x6e2f,
'gao1-i':0x9ad8,
'gao3-i':0x7a3f,
'gao4-i':0x544a,
'ge1-i':0x9e3d,
'ge2-i':0x9abc,
'ge4-i':0x5404,
'gen1-i':0x8ddf,
'geng1-i':0x8015,
'geng4-i':0x66f4,
'gong1-i':0x8eac,
'gong4-i':0x8d21,
'gong5-i':0x86a3,
'gou3-f':0x72d7,
'gou4-i':0x8d2d,
'gu1-i':0x8f9c,
'gu3-f':0x9f13,
'gu4-i':0x987e,
'gu5-i':0x83c7,
'gua1-i':0x74dc,
'gua3-i':0x5be1,
'gua4-i':0x8902,
'guai1-i':0x4e56,
'guai3-i':0x62d0,
'guai4-i':0x602a,
'guan1-i':0x95dc,
'guan3-i':0x9986,
'guan4-i':0x8d2f,
'guang1-i':0x5149,
'guang3-i':0x5ee3,
'guang4-i':0x901b,
'gui1-i':0x9f9f,
'gui3-f':0x9b3c,
'gui4-i':0x8dea,
'gun4-i':0x68cd,
'guo2-i':0x570b,
'ha1-i':0x54c8,
'ha2-i':0x86e4,
'hai1-i':0x55e8,
'hai3-f':0x6d77,
'hai4-i':0x55d0,
'han2-i':0x5bd2,
'han4-i':0x710a,
'hang2-i':0x822a,
'hao2-i':0x8c6a,
'hao3-f':0x597d,
'hao4-i':0x8017,
'he1-i':0x55ec,
'he2-i':0x8377,
'he4-i':0x8d3a,
'hei1-i':0x9ed1,
'hen4-i':0x6068,
'heng1-i':0x54fc,
'heng2-i':0x8861,
'hong1-i':0x8f70,
'hong2-i':0x7ea2,
'hou2-i':0x7334,
'hou3-i':0x543c,
'hou4-i':0x540e,
'hu1-i':0x60da,
'hu2-i':0x8774,
'hu4-i':0x8b77,
'hu5-i':0x552c,
'hua2-i':0x83ef,
'hua4-i':0x756b,
'huai2-i':0x69d0,
'huai4-i':0x58de,
'huan2-i':0x74b0,
'huan3-f':0x7f13,
'huan4-i':0x63db,
'huang1-i':0x8352,
'huang2-i':0x9ec4,
'huang3-i':0x8c0e,
'hui1-i':0x8f89,
'hui2-i':0x56de,
'hui3-i':0x6bc1,
'hui4-i':0x7ed8,
'hun1-i':0x5a5a,
'hun2-i':0x9b42,
'hun4-i':0x6df7,
'huo2-i':0x6d3b,
'huo3-f':0x706b,
'huo4-i':0x8d27,
'ji1-i':0x9e21,
'ji3-f':0x64e0,
'ji4-i':0x969b,
'jia1-i':0x988a,
'jia3-f':0x5047,
'jia4-i':0x9a7e,
'jian1-i':0x8271,
'jian3-f':0x9e7c,
'jian4-i':0x952e,
'jiang1-i':0x97c1,
'jiang3-i':0x8bb2,
'jiang4-i':0x91ac,
'jiao1-i':0x9a84,
'jiao3-i':0x997a,
'jiao4-i':0x9175,
'jie1-i':0x968e,
'jie2-i':0x8282,
'jie3-i':0x89e3,
'jie4-i':0x8beb,
'jin1-i':0x91d1,
'jin3-i':0x9526,
'jin4-i':0x9032,
'jing1-i':0x9cb8,
'jing3-f':0x9888,
'jing4-i':0x955c,
'jiong3-i':0x70af,
'jiu1-i':0x7ea0,
'jiu3-f':0x9152,
'jiu4-i':0x820a,
'ju1-i':0x9a79,
'ju2-i':0x83ca,
'ju3-f':0x5480,
'ju4-i':0x952f,
'juan1-i':0x9e43,
'juan4-i':0x7ee2,
'jue1-i':0x6485,
'jue2-i':0x7edd,
'jun1-i':0x8ecd,
'jun4-i':0x5cfb,
'ka1-i':0x5496,
'ka3-i':0x5361,
'kai1-i':0x958b,
'kai3-f':0x6168,
'kan1-i':0x582a,
'kan5-i':0x780d,
'kang1-i':0x6177,
'kang2-i':0x625b,
'kang4-i':0x7095,
'kao3-f':0x8003,
'kao4-i':0x9760,
'ke2-i':0x58f3,
'ken3-f':0x80af,
'keng1-i':0x5751,
'kong1-i':0x7a7a,
'kong3-f':0x6050,
'kong4-i':0x63a7,
'kou3-i':0x53e3,
'kou4-i':0x6263,
'ku1-i':0x7a9f,
'ku3-f':0x82e6,
'ku4-i':0x9177,
'kua1-i':0x5938,
'kua3-i':0x57ae,
'kua4-i':0x8de8,
'kuai4-i':0x7b77,
'kuan1-i':0x5bec,
'kuan5-i':0x6b3e,
'kuang1-i':0x7b50,
'kuang2-i':0x72c2,
'kuang4-i':0x7926,
'kui1-i':0x8667,
'kui2-i':0x8475,
'kui4-i':0x6f70,
'kun1-i':0x6606,
'kun3-i':0x6346,
'kun4-i':0x56f0,
'la1-i':0x5783,
'la4-i':0x8fa3,
'lai2-i':0x6765,
'lai4-i':0x8d56,
'lan2-i':0x85cd,
'lan4-i':0x721b,
'lang2-i':0x72fc,
'lang4-i':0x6d6a,
'lao2-i':0x7262,
'lao3-f':0x8001,
'le5-i':0x4e86,
'lei2-i':0x96f7,
'lei3-f':0x78ca,
'lei4-i':0x985e,
'leng4-i':0x6123,
'li2-i':0x9ece,
'li3-f':0x9ca4,
'li5-i':0x72f8,
'lia3-i':0x5006,
'lian2-i':0x9570,
'lian3-f':0x81c9,
'lian4-i':0x94fe,
'liang2-i':0x826f,
'liang4-i':0x8f86,
'liao1-i':0x64a9,
'liao4-i':0x6599,
'lie4-i':0x88c2,
'lin2-i':0x9130,
'ling2-i':0x9f84,
'ling4-i':0x53e6,
'liu2-i':0x786b,
'liu4-i':0x516d,
'long2-i':0x9f99,
'long3-i':0x650f,
'lou2-i':0x6a13,
'lou4-i':0x964b,
'lou5-i':0x560d,
'lu2-i':0x7210,
'lu3-i':0x865c,
'lu4-i':0x9e7f,
'luan3-f':0x5375,
'luan4-i':0x4e82,
'lun1-i':0x6384,
'lun2-i':0x8f6e,
'lun4-i':0x8bba,
'luo2-i':0x9aa1,
'luo4-i':0x9a86,
'lv2-i':0x9a74,
'lv4-i':0x8651,
'ma1-i':0x5988,
'ma2-i':0x9ebb,
'ma3-i':0x9a6c,
'ma4-i':0x9a82,
'ma5-i':0x87c6,
'mai2-i':0x57cb,
'mai3-f':0x8cb7,
'mai4-i':0x9ea6,
'man2-i':0x9992,
'man4-i':0x6f2b,
'mang2-i':0x8292,
'mao1-i':0x8c93,
'mao2-i':0x9ae6,
'mao4-i':0x8d38,
'me5-i':0x9ebc,
'mei3-i':0x9541,
'mei4-i':0x6627,
'men2-i':0x95e8,
'men4-i':0x95f7,
'meng2-i':0x76df,
'meng4-i':0x68a6,
'mi1-i':0x7787,
'mi2-i':0x8ff7,
'mi3-i':0x7c73,
'mi4-i':0x871c,
'mian2-i':0x7ef5,
'miao3-f':0x79d2,
'miao4-i':0x5edf,
'mie4-i':0x8511,
'min3-i':0x654f,
'ming2-i':0x9e23,
'ming4-i':0x547d,
'miu4-i':0x8c2c,
'mo2-i':0x9b54,
'mo4-i':0x9ed8,
'mou2-i':0x8c0b,
'mu4-i':0x7a46,
'na4-i':0x90a3,
'nai3-f':0x4e43,
'nai4-i':0x8010,
'nan2-i':0x7537,
'nao3-f':0x8166,
'nao4-i':0x95f9,
'ne5-i':0x5462,
'nei4-i':0x5185,
'nen4-i':0x5ae9,
'neng2-i':0x80fd,
'ni2-i':0x6ce5,
'ni3-i':0x64ec,
'nian2-i':0x9ecf,
'nian4-i':0x5ff5,
'niang5-i':0x5a18,
'niao3-i':0x9e1f,
'niao4-i':0x5c3f,
'nie1-i':0x634f,
'nin2-i':0x60a8,
'ning2-i':0x64f0,
'niu2-i':0x725b,
'nong2-i':0x8fb2,
'nong4-i':0x5f04,
'nu2-i':0x5974,
'nu4-i':0x6012,
'nuan3-i':0x6696,
'nv3-i':0x5973,
'ou1-i':0x9e25,
'pa1-i':0x8db4,
'pa2-i':0x722c,
'pa4-i':0x6015,
'pai1-i':0x62cd,
'pai2-i':0x724c,
'pai4-i':0x6e43,
'pan1-i':0x6500,
'pan2-i':0x76d8,
'pan4-i':0x76fc,
'pang1-i':0x4e53,
'pang2-i':0x9f90,
'pang4-i':0x80d6,
'pao1-i':0x62cb,
'pao2-i':0x888d,
'pao3-f':0x8dd1,
'pao4-i':0x70ae,
'pei1-i':0x5478,
'pei2-i':0x966a,
'pei4-i':0x914d,
'pen1-i':0x5674,
'pen2-i':0x76c6,
'peng1-i':0x7830,
'peng2-i':0x84ec,
'peng4-i':0x78b0,
'pi1-i':0x62ab,
'pi2-i':0x813e,
'pi4-i':0x8b6c,
'pian1-i':0x7bc7,
'pian4-i':0x9a97,
'piao1-i':0x98d8,
'piao2-i':0x74e2,
'piao4-i':0x7968,
'pie1-i':0x77a5,
'pin1-i':0x62fc,
'pin2-i':0x9891,
'pin3-f':0x54c1,
'ping1-i':0x4e52,
'ping2-i':0x8bc4,
'po1-i':0x9887,
'po4-i':0x9b44,
'pou1-i':0x5256,
'pu1-i':0x64b2,
'pu2-i':0x8461,
'pu3-f':0x6734,
'pu4-i':0x7011,
'qi1-i':0x6f06,
'qi2-i':0x9f50,
'qi3-f':0x8d77,
'qi4-i':0x780c,
'qia1-i':0x6390,
'qia4-i':0x6070,
'qian1-i':0x94c5,
'qian2-i':0x94b3,
'qian3-i':0x9063,
'qian4-i':0x6b49,
'qiang1-i':0x8154,
'qiang2-i':0x7246,
'qiang3-i':0x6436,
'qiao1-i':0x9539,
'qiao2-i':0x77a7,
'qiao3-f':0x5de7,
'qiao4-i':0x7ff9,
'qie3-i':0x4e14,
'qie4-i':0x7aca,
'qin1-i':0x94a6,
'qin2-i':0x7434,
'qing1-i':0x9752,
'qing2-i':0x6674,
'qing3-f':0x9877,
'qing4-i':0x6176,
'qiong2-i':0x7aae,
'qiu1-i':0x86af,
'qiu2-i':0x7403,
'qu1-i':0x9a71,
'qu3-i':0x5a36,
'qu4-i':0x8da3,
'quan2-i':0x6cc9,
'quan3-i':0x72ac,
'quan4-i':0x52f8,
'que1-i':0x7f3a,
'que4-i':0x96c0,
'qun2-i':0x88d9,
'ran2-i':0x71c3,
'rang4-i':0x8ba9,
'rao3-f':0x64fe,
'rao4-i':0x7ed5,
're3-i':0x60f9,
're4-i':0x71b1,
'ren2-i':0x4eba,
'ren4-i':0x97e7,
'reng1-i':0x6254,
'reng2-i':0x4ecd,
'ri4-i':0x65e5,
'rong2-i':0x878d,
'rou2-i':0x67d4,
'rou4-i':0x8089,
'ru2-i':0x8815,
'ru4-i':0x5165,
'ruan3-i':0x8f6f,
'rui4-i':0x9510,
'run4-i':0x6f64,
'ruo4-i':0x82e5,
'sa3-i':0x6d12,
'sa4-i':0x85a9,
'sai1-i':0x816e,
'sai4-i':0x8d5b,
'san1-i':0x4e09,
'san4-i':0x6563,
'sang1-i':0x6851,
'sang3-i':0x55d3,
'sang4-i':0x55aa,
'sao1-i':0x6414,
'sao3-f':0x5ac2,
'se4-i':0x8272,
'sen1-i':0x68ee,
'sha1-i':0x7eb1,
'sha3-i':0x50bb,
'sha4-i':0x970e,
'shai1-i':0x7be9,
'shai4-i':0x6652,
'shan1-i':0x886b,
'shan4-i':0x5584,
'shang1-i':0x5546,
'shang3-i':0x8d4f,
'shang5-i':0x88f3,
'shao1-i':0x7a0d,
'shao4-i':0x7ecd,
'she2-i':0x86c7,
'she3-f':0x820d,
'she4-i':0x8bbe,
'shen1-i':0x8eab,
'shen3-i':0x5be9,
'shen4-i':0x6ef2,
'sheng1-i':0x7272,
'sheng3-i':0x7701,
'sheng4-i':0x80dc,
'shi1-i':0x8bd7,
'shi3-f':0x9a76,
'shi4-i':0x9970,
'shou1-i':0x6536,
'shou3-i':0x9996,
'shou4-i':0x7626,
'shu1-i':0x8f93,
'shu2-i':0x719f,
'shu4-i':0x8ff0,
'shua1-i':0x5530,
'shua3-i':0x800d,
'shuai1-i':0x8870,
'shuai3-i':0x7529,
'shuai4-i':0x87c0,
'shuan1-i':0x62f4,
'shuang1-i':0x971c,
'shuang3-f':0x723d,
'shui2-i':0x8c01,
'shui3-i':0x6c34,
'shui4-i':0x7a0e,
'shun4-i':0x987a,
'shuo1-i':0x8bf4,
'shuo4-i':0x720d,
'si1-i':0x7d72,
'si3-f':0x6b7b,
'si4-i':0x9972,
'song1-i':0x677e,
'song4-i':0x9882,
'sou1-i':0x8258,
'su1-i':0x8607,
'su2-i':0x4fd7,
'su4-i':0x901f,
'suan1-i':0x9178,
'suan4-i':0x849c,
'sui1-i':0x96d6,
'sui2-i':0x96a8,
'sui4-i':0x96a7,
'sun1-i':0x5b6b,
'sun3-i':0x640d,
'suo1-i':0x7f29,
'suo3-i':0x9501,
'ta1-i':0x5b83,
'ta3-f':0x5854,
'ta4-i':0x8e4b,
'tai1-i':0x80ce,
'tai2-i':0x62ac,
'tai4-i':0x6c70,
'tan1-i':0x8d2a,
'tan2-i':0x8c08,
'tan3-i':0x6bef,
'tan4-i':0x78b3,
'tang1-i':0x6c64,
'tang2-i':0x819b,
'tang3-f':0x8eba,
'tang4-i':0x8d9f,
'tao1-i':0x6fe4,
'tao2-i':0x9676,
'tao3-f':0x8ba8,
'tao4-i':0x5957,
'te4-i':0x7279,
'teng2-i':0x85e4,
'ti1-i':0x8e22,
'ti2-i':0x9898,
'ti3-i':0x9ad4,
'tian1-i':0x6dfb,
'tian2-i':0x7530,
'tian3-f':0x8214,
'tiao2-i':0x689d,
'tiao4-i':0x8df3,
'tie1-i':0x8d34,
'tie3-f':0x94c1,
'ting1-i':0x5ef3,
'ting2-i':0x8713,
'ting3-i':0x8247,
'tong3-f':0x7edf,
'tong4-i':0x75db,
'tou1-i':0x5077,
'tou2-i':0x6295,
'tou4-i':0x900f,
'tu1-i':0x7a81,
'tu2-i':0x9014,
'tu3-i':0x571f,
'tu4-i':0x5154,
'tuan2-i':0x5718,
'tui1-i':0x63a8,
'tui3-i':0x817f,
'tui4-i':0x9000,
'tun1-i':0x541e,
'tuo1-i':0x8131,
'tuo2-i':0x9a6e,
'tuo3-f':0x6a62,
'tuo4-i':0x553e,
'wa1-i':0x86d9,
'wa3-f':0x74e6,
'wa4-i':0x896a,
'wai1-i':0x6b6a,
'wai4-i':0x5916,
'wan1-i':0x8c4c,
'wan2-i':0x987d,
'wan4-i':0x842c,
'wang1-i':0x6c6a,
'wang2-i':0x738b,
'wang3-i':0x7f51,
'wei1-i':0x5fae,
'wei2-i':0x9055,
'wei4-i':0x8c13,
'wen1-i':0x6eab,
'wen2-i':0x95fb,
'wen3-i':0x7a69,
'wen4-i':0x95ee,
'weng1-i':0x7fc1,
'wo1-i':0x8778,
'wo4-i':0x81e5,
'wu1-i':0x8bec,
'wu2-i':0x8708,
'wu3-f':0x821e,
'wu4-i':0x9727,
'xi1-i':0x9521,
'xi2-i':0x8972,
'xi3-i':0x6d17,
'xia1-i':0x8766,
'xia2-i':0x971e,
'xia4-i':0x590f,
'xian2-i':0x95f2,
'xian3-i':0x986f,
'xian4-i':0x9985,
'xiang1-i':0x9999,
'xiang3-i':0x97ff,
'xiang4-i':0x9879,
'xiao1-i':0x9500,
'xiao3-f':0x66c9,
'xie1-i':0x6b47,
'xie2-i':0x978b,
'xie3-i':0x5beb,
'xie4-i':0x6cc4,
'xin1-i':0x950c,
'xin4-i':0x8845,
'xing1-i':0x8165,
'xing2-i':0x578b,
'xing3-i':0x9192,
'xing4-i':0x5e78,
'xiong1-i':0x80f8,
'xiong2-i':0x96c4,
'xiu1-i':0x4fee,
'xiu3-i':0x673d,
'xiu4-i':0x9508,
'xu1-i':0x987b,
'xu4-i':0x84c4,
'xuan1-i':0x6684,
'xuan2-i':0x6f29,
'xuan4-i':0x7eda,
'xue1-i':0x9774,
'xue2-i':0x5b78,
'xue3-i':0x96ea,
'xue4-i':0x8840,
'xun1-i':0x718f,
'xun2-i':0x8be2,
'xun4-i':0x905c,
'ya1-i':0x9e2d,
'ya3-i':0x555e,
'yan1-i':0x7159,
'yan3-i':0x884d,
'yan4-i':0x9a8c,
'yang2-i':0x967d,
'yang3-i':0x990a,
'yang4-i':0x6f3e,
'yao1-i':0x9080,
'yao2-i':0x9065,
'yao4-i':0x94a5,
'ye3-i':0x91ce,
'ye4-i':0x9875,
'yi1-i':0x91ab,
'yi2-i':0x907a,
'yi3-i':0x87fb,
'yi4-i':0x8c0a,
'yin1-i':0x97f3,
'yin2-i':0x94f6,
'yin3-i':0x996e,
'yin4-i':0x5370,
'ying1-i':0x9e70,
'ying2-i':0x8fce,
'ying3-f':0x9896,
'ying4-i':0x786c,
'yong3-i':0x6d8c,
'yong4-i':0x7528,
'you2-i':0x94c0,
'you3-i':0x6709,
'you4-i':0x8bf1,
'yu3-f':0x96e8,
'yu4-i':0x9884,
'yuan1-i':0x51a4,
'yuan2-i':0x7f18,
'yuan3-i':0x9060,
'yuan4-i':0x9662,
'yue1-i':0x7ea6,
'yue4-i':0x9605,
'yun2-i':0x5300,
'yun4-i':0x904b,
'za1-i':0x5482,
'za2-i':0x96dc,
'za3-i':0x548b,
'zai1-i':0x707e,
'zai3-i':0x5d3d,
'zai4-i':0x5728,
'zan4-i':0x8d5e,
'zang4-i':0x846c,
'zao1-i':0x906d,
'zao2-i':0x947f,
'zao3-f':0x6fa1,
'zao4-i':0x9020,
'ze2-i':0x8d23,
'zei2-i':0x8d3c,
'zen3-f':0x600e,
'zeng1-i':0x589e,
'zha1-i':0x6e23,
'zha2-i':0x95f8,
'zha3-f':0x7728,
'zha4-i':0x70b8,
'zhai1-i':0x6458,
'zhai2-i':0x5b85,
'zhai3-i':0x7a84,
'zhai4-i':0x50b5,
'zhan1-i':0x7c98,
'zhan3-f':0x76de,
'zhan4-i':0x8638,
'zhang1-i':0x7ae0,
'zhang4-i':0x969c,
'zhao1-i':0x62db,
'zhao3-f':0x627e,
'zhao4-i':0x7f69,
'zhe1-i':0x906e,
'zhe2-i':0x54f2,
'zhe3-f':0x8005,
'zhe4-i':0x9019,
'zhen1-i':0x9488,
'zhen3-i':0x8bca,
'zhen4-i':0x9707,
'zheng1-i':0x84b8,
'zheng3-f':0x6574,
'zheng4-i':0x912d,
'zhi1-i':0x8718,
'zhi2-i':0x8077,
'zhi3-f':0x7eb8,
'zhi4-i':0x8d28,
'zhong1-i':0x949f,
'zhong3-i':0x816b,
'zhong4-i':0x773e,
'zhou1-i':0x821f,
'zhou2-i':0x8f74,
'zhou4-i':0x9aa4,
'zhu1-i':0x8c6c,
'zhu2-i':0x9010,
'zhu3-f':0x716e,
'zhu4-i':0x9a7b,
'zhua1-i':0x6293,
'zhuan1-i':0x78da,
'zhuan3-f':0x8f6c,
'zhuan4-i':0x8d5a,
'zhuang1-i':0x88dd,
'zhuang4-i':0x72c0,
'zhui1-i':0x8ffd,
'zhui4-i':0x589c,
'zhun3-f':0x51c6,
'zhuo1-i':0x684c,
'zhuo2-i':0x8301,
'zi1-i':0x8d44,
'zi3-i':0x7d2b,
'zi4-i':0x81ea,
'zong1-i':0x8e64,
'zong3-i':0x7e3d,
'zong4-i':0x7eb5,
'zou3-f':0x8d70,
'zou4-i':0x63cd,
'zu1-i':0x79df,
'zu2-i':0x8db3,
'zu3-f':0x963b,
'zuan1-i':0x94bb,
'zuan4-i':0x6525,
'zui3-i':0x5634,
'zui4-i':0x9189,
'zun1-i':0x9075,
'zuo4-i':0x5ea7,
}
for k,v in theMap.items(): open(k+'.txt','w').write(unichr(v).encode('utf-16'))

raw_input("Now batch-convert new-stuff"+os.sep+"*.txt to WAV and press Enter: ")
print "Trimming..."

threshold=2

def trim(filename,startThreshold,endThreshold):
    (wtype,rate,channels,wframes,bits) = sndhdr.what(filename)
    if bits==16:
        soxBits="-w -s"
        structBits="h"
        startThreshold *= 256
        endThreshold *= 256
    elif bits==32:
        soxBits="-l -s"
        structBits="i"
        startThreshold *= (256 * 256 * 256)
        endThreshold *= (256 * 256 * 256)
    else: raise Exception("Unsupported bits per sample")
    bytesPerSample = int(bits/8)
    soxParams = "-t raw %s -r %d -c 1" % (soxBits,rate)
    data = os.popen("sox %s %s -" % (filename,soxParams)).read()
    start = 0 ; end=len(data)
    while abs(struct.unpack("1"+structBits,data[start:start+bytesPerSample])[0])<startThreshold: start += bytesPerSample
    while abs(struct.unpack("1"+structBits,data[end-bytesPerSample:end])[0])<endThreshold: end -= bytesPerSample
    open("tmp.raw", "wb").write(''.join(data[start:end]))
    os.system("sox "+soxParams+" tmp.raw "+filename)
    os.unlink("tmp.raw")

for k in theMap.keys():
    os.remove(k+".txt")
    if k.endswith("-f") or k[:k.index("-")] in 'bang3 di3 dian3 duan3 lu3 qiang3 tan3 ting3': trim(k+".wav",threshold,0)
    else: trim(k+".wav",threshold,threshold)
open("kou5-i.wav","wb").write(open("kou3-i.wav","rb").read())
print "All done, in new-stuff"+os.sep
print '''If you want to calibrate the tone 1s, do this:
(works in praat v5.0.2, NOT v5.1.29)
cd new-stuff ; for N in *1*.wav; do echo "Read from file... $N"; echo "Change gender... 75.0 600.0 1.0 200 1.0 1.0"; echo "nowarn Write to WAV file... $N"; echo "Remove"; done > temp.praat ; praat temp.praat ; touch \!calibrated'''
